{% extends 'blog/base.html' %}

{% block title %}Search Results - Django Blog{% endblock %}

{% block content %}
    <div style="max-width: 800px; margin: 0 auto;">
        <h1>Search Results</h1>
        
        <!-- Search form -->
        <div style="margin-bottom: 30px;">
            <form method="get" action="{% url 'search' %}" style="display: flex; gap: 10px;">
                <input type="text" 
                       name="q" 
                       value="{{ query }}" 
                       placeholder="Search posts by title, content, or tags..." 
                       style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 3px;"
                       required>
                <button type="submit" 
                        style="background-color: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 3px; cursor: pointer;">
                    Search
                </button>
            </form>
        </div>
        
        <!-- Results info -->
        {% if query %}
            <div style="margin-bottom: 20px; padding: 15px; background-color: #e9ecef; border-radius: 5px;">
                <p style="margin: 0;">
                    Found <strong>{{ results_count }}</strong> result{{ results_count|pluralize }} for "<strong>{{ query }}</strong>"
                </p>
            </div>
        {% endif %}
        
        <!-- Results list -->
        {% if posts %}
            {% for post in posts %}
                <div style="margin-bottom: 30px; padding: 20px; border: 1px solid #eee; border-radius: 5px;">
                    <h3 style="margin-top: 0;">
                        <a href="{% url 'post-detail' post.id %}" style="color: #007bff; text-decoration: none;">
                            {{ post.title }}
                        </a>
                    </h3>
                    
                    <div style="margin-bottom: 15px;">
                        <small>
                            By <strong>{{ post.author.username }}</strong> on {{ post.published_date|date:"F d, Y H:i" }}
                        </small>
                    </div>
                    
                    <p style="line-height: 1.6;">
                        {{ post.content|truncatewords:50 }}
                    </p>
                    
                    <!-- Tags -->
                    {% if post.tags.all %}
                        <div style="margin-top: 15px;">
                            <strong>Tags:</strong>
                            <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-top: 5px;">
                                {% for tag in post.tags.all %}
                                    <span style="background-color: #f8f9fa; color: #495057; padding: 2px 8px; border-radius: 10px; font-size: 12px;">
                                        {{ tag.name }}
                                    </span>
                                {% endfor %}
                            </div>
                        </div>
                    {% endif %}
                </div>
            {% endfor %}
        {% elif query %}
            <div style="padding: 30px; text-align: center; background-color: #f8f9fa; border-radius: 5px;">
                <p style="margin: 0; color: #6c757d;">
                    No posts found matching your search criteria.
                </p>
            </div>
        {% else %}
            <div style="padding: 30px; text-align: center; background-color: #f8f9fa; border-radius: 5px;">
                <p style="margin: 0; color: #6c757d;">
                    Enter a search term above to find posts.
                </p>
            </div>
        {% endif %}
        
        <div style="margin-top: 30px;">
            <a href="{% url 'post-list' %}" style="color: #007bff; text-decoration: none;">‚Üê Back to All Posts</a>
        </div>
    </div>
{% endblock %}