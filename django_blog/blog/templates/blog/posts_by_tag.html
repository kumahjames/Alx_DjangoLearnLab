{% extends 'blog/base.html' %}

{% block title %}Posts tagged with "{{ tag.name }}" - Django Blog{% endblock %}

{% block content %}
    <div style="max-width: 800px; margin: 0 auto;">
        <h1>Posts tagged with "<span style="color: #007bff;">{{ tag.name }}</span>"</h1>
        
        <div style="margin-bottom: 20px; padding: 15px; background-color: #e9ecef; border-radius: 5px;">
            <p style="margin: 0;">
                Found <strong>{{ posts_count }}</strong> post{{ posts_count|pluralize }} with this tag.
            </p>
        </div>
        
        <!-- Posts list -->
        {% if posts %}
            {% for post in posts %}
                <div style="margin-bottom: 30px; padding: 20px; border: 1px solid #eee; border-radius: 5px;">
                    <h3 style="margin-top: 0;">
                        <a href="{% url 'post-detail' post.id %}" style="color: #007bff; text-decoration: none;">
                            {{ post.title }}
                        </a>
                    </h3>
                    
                    <div style="margin-bottom: 15px;">
                        <small>
                            By <strong>{{ post.author.username }}</strong> on {{ post.published_date|date:"F d, Y H:i" }}
                        </small>
                    </div>
                    
                    <p style="line-height: 1.6;">
                        {{ post.content|truncatewords:50 }}
                    </p>
                    
                    <!-- Tags -->
                    {% if post.tags.all %}
                        <div style="margin-top: 15px;">
                            <strong>Tags:</strong>
                            <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-top: 5px;">
                                {% for tag in post.tags.all %}
                                    <a href="{% url 'posts-by-tag' tag.slug %}" 
                                       style="background-color: #f8f9fa; color: #495057; padding: 2px 8px; border-radius: 10px; font-size: 12px; text-decoration: none;">
                                        {{ tag.name }}
                                    </a>
                                {% endfor %}
                            </div>
                        </div>
                    {% endif %}
                    
                    <div style="margin-top: 15px;">
                        <a href="{% url 'post-detail' post.id %}" style="color: #17a2b8; text-decoration: none;">
                            Read more →
                        </a>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div style="padding: 30px; text-align: center; background-color: #f8f9fa; border-radius: 5px;">
                <p style="margin: 0; color: #6c757d;">
                    No posts found with this tag.
                </p>
            </div>
        {% endif %}
        
        <div style="margin-top: 30px;">
            <a href="{% url 'post-list' %}" style="color: #007bff; text-decoration: none;">← Back to All Posts</a>
        </div>
    </div>
{% endblock %}